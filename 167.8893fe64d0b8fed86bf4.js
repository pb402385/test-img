(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{L6id:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),o=function(){return function(){}}(),r=e("pMnS"),u=e("ra/t"),i=e("ntG5"),a=e("M9A9"),c=e("ZYCi"),s=e("tXrQ"),p=e("Ip0R"),b=e("yf1x"),m=e("2EMw"),h=(e("OO+k"),function(l,n,e,t){return new(e||(e=Promise))(function(o,r){function u(l){try{a(t.next(l))}catch(n){r(n)}}function i(l){try{a(t.throw(l))}catch(n){r(n)}}function a(l){l.done?o(l.value):new e(function(n){n(l.value)}).then(u,i)}a((t=t.apply(l,n||[])).next())})}),d=function(){function l(l,n,e,t){this.alertController=l,this.apiMeteo=n,this.errorService=e,this.router=t,this.myloc=null,this.items=[],this.currentLat=null,this.currentLong=null,this.alrt=null,this.getFavoris()}return l.prototype.ngOnInit=function(){this.findMe()},l.prototype.itemClick=function(l){this.router.navigate(["/meteo-detail?id="+l])},l.prototype.presentAlertPrompt=function(){return h(this,void 0,void 0,function(){var l=this;return function(l,n){var e,t,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(r){return function(i){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,t&&(o=2&r[0]?t.return:r[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,r[1])).done)return o;switch(t=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,t=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=n.call(l,u)}catch(i){r=[6,i],t=0}finally{e=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}}(this,function(n){switch(n.label){case 0:return[4,this.alertController.create({header:"Entrez une ville!",inputs:[{name:"ville",type:"text",placeholder:"Ville"}],buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel"),l.changeColor("buttonPlus","reset")}},{text:"Valider",handler:function(n){console.log(n.ville),l.changeColor("buttonPlus","reset"),l.isValid(n.ville)?l.saveVille(n.ville):l.errorService.errorManagement("Erreur lors de la r\xe9cup\xe9ration par ville (ville d\xe9j\xe0 entr\xe9e)","erreurVille",l)}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},l.prototype.isValid=function(l){var n=JSON.parse(localStorage.getItem("myloc")),e=localStorage.length;null!==n&&(e-=1);for(var t=0;t<e;t++){var o=JSON.parse(localStorage.getItem(""+t)).name;if(l.toUpperCase()===o.toUpperCase())return!1}return!0},l.prototype.getFavoris=function(){var l=JSON.parse(localStorage.getItem("myloc")),n=localStorage.length;null!==l&&(n-=1);for(var e=0;e<n;e++){var t=JSON.parse(localStorage.getItem(""+e));this.items.push({temperature:t.main.temp+" \xb0C",ville:t.name+" ("+t.sys.country+")",icon:"https://openweathermap.org/img/w/"+t.weather[0].icon+".png"})}},l.prototype.saveVille=function(l){var n=this;this.apiMeteo.getWeatherFromCityName(l).subscribe(function(l){var e=l.body,t=localStorage.length;null!==localStorage.getItem("myloc")&&(t-=1),localStorage.setItem(""+t,JSON.stringify(e));var o=JSON.parse(localStorage.getItem(""+t));n.items.push({temperature:o.main.temp,ville:o.name+" ("+o.sys.country+")",icon:"https://openweathermap.org/img/w/"+o.weather[0].icon+".png",ico:o.weather[0].icon})},function(l){l&&n.errorService.errorManagement("Erreur lors de la r\xe9cup\xe9ration par ville","erreurVille",n)})},l.prototype.findMe=function(){var l=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){l.currentLat=n.coords.latitude,l.currentLong=n.coords.longitude,l.apiMeteo.getWeatherFromCoordinates(l.currentLat,l.currentLong).subscribe(function(n){localStorage.setItem("myloc",JSON.stringify(n.body));var e=JSON.parse(localStorage.getItem("myloc"));l.myloc={temperature:e.main.temp+" \xb0C",ville:e.name+" ("+e.sys.country+")",icon:"https://openweathermap.org/img/w/"+e.weather[0].icon+".png",ico:e.weather[0].icon}},function(n){n&&l.errorService.errorManagement("Erreur lors de la r\xe9cup\xe9ration par g\xe9olocalisation","erreurGeolocalisation",l)})}):alert("Geolocation is not supported by this browser.")},l.prototype.changeColor=function(l,n){"init"==n&&(document.getElementById(l).style.backgroundColor="#0066cc"),"reset"==n&&(document.getElementById(l).style.backgroundColor="deepskyblue")},l.prototype.changeColorDelay=function(l){document.getElementById(l).style.backgroundColor="#0066cc",setTimeout(function(){document.getElementById(l).style.backgroundColor="deepskyblue"},150)},l}(),f=e("CssM"),g=t.nb({encapsulation:0,styles:[[""]],data:{}});function y(l){return t.Db(0,[(l()(),t.pb(0,0,null,null,6,"ion-item",[["href","/meteo-detail?id=myloc"],["id","myloc"]],null,[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==t.zb(l,2).onClick(e)&&o),o},u.A,u.j)),t.ob(1,49152,null,0,i.C,[t.h,t.k],{href:[0,"href"]},null),t.ob(2,16384,null,0,a.a,[[2,c.l],s.a,t.k],{href:[0,"href"]},null),(l()(),t.pb(3,0,null,0,0,"img",[["item-start",""]],[[8,"src",4]],null,null,null,null)),(l()(),t.Cb(4,0,[" "," "])),(l()(),t.pb(5,0,null,0,1,"div",[["class","item-note"],["slot","end"]],null,null,null,null,null)),(l()(),t.Cb(6,null,[" "," "]))],function(l,n){l(n,1,0,"/meteo-detail?id=myloc"),l(n,2,0,"/meteo-detail?id=myloc")},function(l,n){var e=n.component;l(n,3,0,t.rb(1,"",e.myloc.icon,"")),l(n,4,0,e.myloc.temperature),l(n,6,0,e.myloc.ville)})}function v(l){return t.Db(0,[(l()(),t.pb(0,0,null,null,8,"ion-list",[],null,null,null,u.C,u.l)),t.ob(1,49152,null,0,i.J,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,6,"ion-item",[],[[8,"id",0],[8,"style",2]],[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==t.zb(l,4).onClick(e)&&o),o},u.A,u.j)),t.ob(3,49152,null,0,i.C,[t.h,t.k],{href:[0,"href"]},null),t.ob(4,16384,null,0,a.a,[[2,c.l],s.a,t.k],{href:[0,"href"]},null),(l()(),t.pb(5,0,null,0,0,"img",[["item-start",""]],[[8,"src",4]],null,null,null,null)),(l()(),t.Cb(6,0,[" "," "])),(l()(),t.pb(7,0,null,0,1,"div",[["class","item-note"],["slot","end"]],null,null,null,null,null)),(l()(),t.Cb(8,null,[" "," "]))],function(l,n){l(n,3,0,t.rb(1,"/meteo-detail?id=",n.context.index,"")),l(n,4,0,t.rb(1,"/meteo-detail?id=",n.context.index,""))},function(l,n){l(n,2,0,t.rb(1,"ville=",n.context.index,""),t.rb(1,"background-image: url('assets/icon/",n.context.$implicit.ico,".jpg');")),l(n,5,0,t.rb(1,"",n.context.$implicit.icon,"")),l(n,6,0,n.context.$implicit.temperature),l(n,8,0,n.context.$implicit.ville)})}function k(l){return t.Db(0,[(l()(),t.pb(0,0,null,null,9,"ion-header",[["id","ionHeader"]],null,null,null,u.x,u.g)),t.ob(1,49152,null,0,i.w,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,7,"ion-toolbar",[],null,null,null,u.H,u.p)),t.ob(3,49152,null,0,i.vb,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,2,"button",[["clear",""],["color","primary"],["icon-only",""],["id","buttonHome"],["ion-button",""],["large",""],["style","float:left;width:25%;border-radius:25px;background-color: deepskyblue;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.changeColorDelay("buttonHome")&&t),t},null,null)),(l()(),t.pb(5,0,null,null,1,"ion-icon",[["is-active","false"],["name","home"],["style","font-size: 200%;color: honeydew;"]],null,null,null,u.y,u.h)),t.ob(6,49152,null,0,i.x,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(7,0,null,0,2,"button",[["clear",""],["icon-only",""],["id","buttonPlus"],["ion-button",""],["large",""],["style","float:right;width:25%;border-radius:25px;background-color: deepskyblue;"]],null,[[null,"click"]],function(l,n,e){var t=!0,o=l.component;return"click"===n&&(o.presentAlertPrompt(),t=!1!==o.changeColor("buttonPlus","init")&&t),t},null,null)),(l()(),t.pb(8,0,null,null,1,"ion-icon",[["is-active","false"],["name","add"],["style","font-size: 200%;color: honeydew;"]],null,null,null,u.y,u.h)),t.ob(9,49152,null,0,i.x,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(10,0,null,null,2,"ion-label",[["style","background-color: deepskyblue;font-style: italic;color: honeydew;font-size: 125%;"]],null,null,null,u.B,u.k)),t.ob(11,49152,null,0,i.I,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Ma g\xe9olocalisation:\n"])),(l()(),t.gb(16777216,null,null,1,null,y)),t.ob(14,16384,null,0,p.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(15,0,null,null,2,"ion-label",[["style","background-color: deepskyblue;font-style: italic;color: honeydew;font-size: 125%;"]],null,null,null,u.B,u.k)),t.ob(16,49152,null,0,i.I,[t.h,t.k],null,null),(l()(),t.Cb(-1,0,[" Favoris:\n"])),(l()(),t.pb(18,0,null,null,3,"ion-content",[],null,null,null,u.w,u.f)),t.ob(19,49152,null,0,i.p,[t.h,t.k],null,null),(l()(),t.gb(16777216,null,0,1,null,v)),t.ob(21,278528,null,0,p.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,6,0,"home"),l(n,9,0,"add"),l(n,14,0,null!==e.myloc),l(n,21,0,e.items)},null)}function w(l){return t.Db(0,[(l()(),t.pb(0,0,null,null,1,"app-home",[],null,null,null,k,g)),t.ob(1,114688,null,0,d,[f.a,b.a,m.a,c.l],null,null)],function(l,n){l(n,1,0)},null)}var x=t.lb("app-home",d,w,{},{},[]),C=e("gIcY"),S=e("95zI"),I=e("9opb"),O=e("apKv"),M=e("B4/3");e.d(n,"HomePageModuleNgFactory",function(){return J});var J=t.mb(o,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[r.a,x]],[3,t.j],t.x]),t.xb(4608,p.k,p.j,[t.u,[2,p.r]]),t.xb(4608,C.c,C.c,[]),t.xb(4608,S.a,S.a,[t.z,t.g]),t.xb(4608,I.a,I.a,[S.a,t.j,t.q]),t.xb(4608,O.a,O.a,[S.a,t.j,t.q]),t.xb(4608,f.a,f.a,[]),t.xb(1073742336,p.b,p.b,[]),t.xb(1073742336,C.b,C.b,[]),t.xb(1073742336,C.a,C.a,[]),t.xb(1073742336,M.a,M.a,[]),t.xb(1073742336,c.n,c.n,[[2,c.t],[2,c.l]]),t.xb(1073742336,o,o,[]),t.xb(1024,c.j,function(){return[[{path:"",component:d}]]},[])])})}}]);